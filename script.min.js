

let cart=JSON.parse(localStorage.getItem("cart"))||[];function updateCartCount(){let t=document.getElementById("cart-count");t&&(t.textContent=cart.length)}function addToCart(t){let e=cart.find(e=>e.name===t.name);e||(cart.push(t),localStorage.setItem("cart",JSON.stringify(cart)),updateCartCount(),updateCart())}function removeFromCart(t){cart.splice(t,1),localStorage.setItem("cart",JSON.stringify(cart)),updateCart(),updateCartCount()}function updateCart(){let t=document.getElementById("cart-items");if(!t)return;t.innerHTML="";let e=0;0===cart.length?t.innerHTML="<p>No tienes productos en el carrito todav\xeda.</p>":cart.forEach((r,a)=>{let n=document.createElement("div");n.classList.add("cart-item"),n.style.border="1px solid #ddd",n.style.padding="16px",n.style.marginBottom="16px",n.style.borderRadius="8px",n.style.boxShadow="0px 2px 5px rgba(0,0,0,0.1)",n.innerHTML=`
    <div style="display: flex; align-items: center;">
        <img src="${r.image}" alt="${r.name}" loading="lazy" style="width: 100px; height: auto; margin-right: 20px;">
        <div>
            <h4 style="margin: 0;">${r.name}</h4>
            <p style="margin: 5px 0;">Precio: ${r.price}</p>
            <button onclick="removeFromCart(${a})" style="background-color: red; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">Eliminar</button>
        </div>
    </div>
`,t.appendChild(n);let i=parseFloat(r.price.replace(/[^0-9,.]/g,"").replace(",","."));e+=i}),document.getElementById("total-price").textContent=`Total: $${e.toLocaleString("es-ES",{minimumFractionDigits:2})}`}document.addEventListener("DOMContentLoaded",()=>{updateCartCount(),updateCart()}),document.querySelectorAll(".product button").forEach(t=>{t.addEventListener("click",()=>{let e=t.parentElement,r={name:e.querySelector("h3").textContent,price:e.querySelector("p").textContent,image:e.querySelector("img").getAttribute("src")};addToCart(r)})});